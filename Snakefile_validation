include: config["assembly_finder_Snakefile"]

import pandas
import re

def get_in_silco_sample(input_table):
    print(input_table)
    all_samples=pandas.DataFrame()
    sras_ext = {}
    reads_sra = {}
    reads_local = {}
    original_names = {}
    local_data = pandas.read_csv(input_table, sep="\t", index_col=0)
    local_data.index = [str(x) for x in local_data.index]
    all_local_sample_names =  "".join(list(local_data.index))
    return(local_data)

reads_local = get_in_silco_sample(assembly_finder_table)


## Include the pipeline rules
include: "rules/0_preprocessing/logging.rules"
include: "rules/3_tax_assignment/RDP_in_QIIME.rules"
#include: "rules/4_post_processing/physeq_processing.rules"
#include: "rules/5_visualization/General_plotting.rules"
include: "rules/5_visualization/QIIME2_import.rules"
include: "rules/PICRUSt2/picrust.rules"
#include: "rules/Qiime_QualityControl/amplicons_reference.rules"
include: "rules/Qiime_QualityControl/insilico_validation.rules"


rule all:
    input:
        expand ("InSilico/3_classified/rdp_{tax_DB}/dna-sequences_tax_assignments.txt" , tax_DB = config["tax_DB"])
